branches:
  only:
    - master
language: python
sudo: false
python:
  - 3.4
  - 3.5
env:
  - SYMPY_GROUND_TYPES=python MPMATH_NOGMPY=Y
addons:
  apt:
    packages:
      - libgmp-dev
      - libatlas-dev
      - libatlas-base-dev
      - liblapack-dev
      - gfortran
matrix:
  include:
    - python: 3.4
      script:
        - python setup.py test --cov -m 'not slow'
      after_success:
        - coveralls
    - python: 3.4
      env:
        - SYMPY_GROUND_TYPES=gmpy1
      script:
        - py.test sympy/polys
before_install:
  - pip install --upgrade pip setuptools pytest
  - pip install coveralls
install:
  - travis_wait pip install .[exports,plot,interactive,gmpy]
before_script:
  - sh -e /etc/init.d/xvfb start
  - export DISPLAY=:99.0
script:
  - python setup.py test
notifications:
  email: false

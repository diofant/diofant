language: python
sudo: false
python:
  - 2.7
  - 3.4
addons:
  apt:
    packages:
      - libgmp-dev
      - libatlas-dev
      - libatlas-base-dev
      - liblapack-dev
      - gfortran
matrix:
  include:
    - python: 2.7
      env:
        - PYTEST_EXTRA_ARGS='--cov sympy -m "not slow"'
before_install:
  - if [[ "${TEST_EXTRA}" == "true" ]]; then
      pip install sphinx==1.2.2 numpydoc==0.5 sphinx_rtd_theme;
    fi
  - pip install pytest==2.7.0 pep8==1.6.2
  - if [[ "${TRAVIS_PYTHON_VERSION}" == "2.7" ]]; then
      pip install pytest-cov coveralls --use-mirrors;
    fi
install:
  - if [[ "${TEST_EXTRA}" == "true" ]]; then
      pip install .[extra,plot,gmpy];
    else
      pip install .;
    fi
before_script:
  - sh -e /etc/init.d/xvfb start
  - export DISPLAY=:99.0
script:
  - python setup.py test
  - pep8
after_success:
  - coveralls
notifications:
  email: false
